
@{
    ViewBag.Title = "CreateUserPage";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
 
<script type="text/javascript" src="~/Content/TimeCircle/TimeCircles.js"></script> 
<link href="~/Content/TimeCircle/TimeCircles.css" rel="stylesheet">

<div class="row" style="background-color:white">
    <div class="col-12">
        <div class="section-heading text-center">
            <!-- Dream Dots -->
            <div class="dream-dots justify-content-center fadeInUp" data-wow-delay="0.2s">
                <img src="~/Content/Template/img/icons8-sign-up-64.png" alt="" />
            </div>
        </div>
    </div>
</div>

<!-- Contact Form -->
<style>
    #myForm .error {
        color: red;
        font: bold;
    }
</style>
<form id="myForm">
    <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-8">
            <form action="#" method="post">

                <div class="col-12 col-md-4">
                    <p style="color:black">Kullanıcı Adınız **</p>
                    <div class="group fadeInUp" data-wow-delay="0.2s">

                        <input type="text" name="userName" id="userName" required>
                        <span class="highlight"></span>
                        <span class="bar"></span>
                    </div>
                </div>
                
                @*<div class="col-12 col-md-4">
            <p style="color:black">Adınız **</p>
            <div class="group fadeInUp" data-wow-delay="0.2s">

                <input type="text" name="name" id="name" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Soyadınız **</p>
            <div class="group fadeInUp" data-wow-delay="0.2s">

                <input type="text" name="surName" id="surName" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Email **</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="text" name="email" id="email" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Şifreniz **</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="text" name="password" id="password" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Şifre Tekrarı **</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="text" name="rPassword" id="rPassword" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Mobil Telefonunuz **</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="number" name="telephone" id="telephone" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Sabit Telefonunuz</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="number" name="telep" id="telep" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">fax</p>
            <div class="group fadeinup" data-wow-delay="0.3s">

                <input type="number" name="fax" id="fax" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Sektörünüz **</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="text" name="Industry" id="Industry" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Şirket</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="text" name="companyName" id="companyName" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <p style="color:black">Web Siteniz</p>
            <div class="group fadeInUp" data-wow-delay="0.3s">

                <input type="number" name="webSite" id="webSite" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>*@
        </div>
                <div class="col-12 text-center fadeInUp" data-wow-delay="0.6s">
                    <button type="submit" class="btn dream-btn">Kayıt Ol</button>
                </div>
            </form>
        </div>
    </div>
</form>






<div id="myModal" class="modal fade" role="dialog" style="margin-top:15%">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" style="margin: auto;">
                <div style="text-align:center">
                    <p>Sms Kodunuzu Giriniz</p>
                    <input type="text" id="pincode" maxlength="4">
                </div>
                
            </div>

            

            <div id="countdown">
                <p style="margin-top: 12%;"><span id="goster"  />120</p>
                <svg>
                    <circle r="18" cx="20" cy="20"></circle>
                </svg>
            </div>



            <div class="modal-footer">
                <button id="correctButton" type="correctButton" class="btn btn-default" data-dismiss="modal">Doğrula</button>
                <button id="closeButton" type="closeButton" class="btn btn-default" data-dismiss="modal">Kapat</button>

                
            </div>


        </div>

        

    </div>
</div>

<input type="hidden" id="hiddenCode" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>

<script>
    
</script>

<script>
    $('#myForm').validate({
        rules: {
            userName: {
                required: true,
                minlength: 2
            },
            name: {
                required: true,
                minlength: 2
            },
            
            surName: {
                required: true,
                minlength: 2
            },
            email: {
                required: true,
                email: true
            },
            telephone: {
                required: true,
            },
            city: {
                required: true,
            },
            companyName: {
                required: true,
            }
        },
        messages: {
            userName: 'zorunlu alan',
            name:'zorunlu alan',
            surName: 'zorunlu alan',
            email: 'zorunlu alan',
            telephone: 'zorunlu alan',
            city: 'zorunlu alan',
            companyName: 'zorunlu alan',
        },
        onfocusout: function (el) {
            this.element(el);
        },
        submitHandler: function (form) {
            var smsInfo = new Object();
            smsInfo.smsCode = Math.floor(Math.random() * 9001) + 1000;
            smsInfo.telephone = $('#telephone').val();
            smsInfo.name = $("#cname").val();

            $.ajax({
                type: "POST",
                url: '/send-sms',
                data: JSON.stringify(smsInfo),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (sms) {
                    var zaman = 120;
                    var geriSay = setInterval(function () {
                        zaman--;
                        document.getElementById("goster").textContent = zaman;
                        if (zaman <= 0) {
                            clearInterval(geriSay);
                        }},1000);
                    $("#hiddenCode").attr("value", sms); 
                    $("#myModal").modal();
                    setTimeout(function () { $(location).attr('href', '/CreateUserPage') }, 120000);
                }
            });
            return false;
        }
    });
</script>


<script type="text/javascript">
    $("#correctButton").click(function () {
        var enterNumber = $("#pincode").val();
        var creatingSmsCode = $("#hiddenCode").val();

        if (enterNumber.matches(creatingSmsCode)) {
            alert("Kodu Doğru Girdiniz");
        } else {
            alert("Kodu Yanlış Girdiniz");
        }

    });

</script>

